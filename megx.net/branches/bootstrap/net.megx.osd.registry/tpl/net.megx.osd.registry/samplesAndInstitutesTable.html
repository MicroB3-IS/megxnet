<link href="$ctx.siteUrl/net.megx.osd.registry/stylesheets/osdRegistry-bootstrap.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="$ctx.siteUrl/net.megx.osd.registry/js/osdRegistry.min.js"></script>
<script src="//cdn.datatables.net/plug-ins/e9421181788/sorting/natural.js" type="text/javascript"></script>

#set($url = "$ctx.siteUrl/ws/v1/OSDRegistry/v1.0.0/participants")

$ext.dataTable.renderServerSide(
	['OSD ID', 'Site name', 'Institution', 'Site coordinator', 'Country', 'Action'], 
	$url,
	false,
	"{
	 aoColumns: [
	 {
	 	type: 'natural',
	 	mData: 'osdID',
	 	sClass: 'data-pad',
	 	sWidth: '80px'
	 }, { 
	 	mData: 'siteName',
	 	sClass: 'data-pad',
	 	sWidth: '130px'
	 }, {
	 	mData: 'institution',
	 	sClass: 'data-pad',
	 	sWidth: '220px' 
	 }, {
	 	mData: 'siteCoordinator',
	 	sClass: 'data-pad',
	 	sWidth: '160px'
	 }, {
	 	mData: 'country',
	 	sClass: 'data-pad',
	 	sWidth: '110px'
	 }, {
	 	mData: 'id',
	 	sClass: 'center',
	 	sWidth: '130px',
	 	mRender: function(id){
	 		#if($req.user && $req.servletRequset.isUserInRole('admin'))
	 			var editUrl = '$ctx.siteUrl/osd-registry/add?id=' + id;
	 			var deleteUrl = '$ctx.siteUrl/ws/v1/OSDRegistry/v1.0.0/deleteParticipant?id=' + id;
	 			return '<button data-toggle=\'modal\' data-target=\'#viewDialog\' data-view-id=' + id +' class=\'btn btn-xs btn-default\'>View</button> / <a class=\'btn btn-xs btn-default\' type=\'button\' href=' + editUrl + '>Edit</a> / <button data-toggle=\'modal\' data-target=\'#deleteDialog\' data-delete-id=' + id +' class=\'btn btn-xs btn-default\'>Delete</button>';
 			#else
 				return '<button data-toggle=\'modal\' data-target=\'#viewDialog\' data-view-id=' + id +' class=\'btn btn-xs btn-default\'>View</button>';
			#end
	 	}
	 }]
}")

<div class="modal" id="deleteDialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Delete OSD Site</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete the site <em class="delete-id"></em>?</p>
      </div>
      <div class="modal-footer">
        <button id="deleteDialog-cancelButton" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button id="deleteDialog-deleteButton" type="button" class="btn btn-primary">Delete Site</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

#parse("net.megx.osd.registry/viewDialog.html")
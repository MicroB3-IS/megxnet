#set( $baseWsURL = "${ctx.siteUrl}/ws/v1/mg-traits/v1.0.0" )
#set( $allURL = "${baseWsURL}/all")

<script type="text/javascript">
  $(document).ready(function(){
	  $('.downloadAllTraitsLink').click(function(){
		  var url = $(this).attr('href');
		  $.ajax(url,{
			  headers: {          
                 Accept : "text/csv; charset=utf-8",         
                 "Content-Type": "text/csv; charset=utf-8"   
	 		  },
			  async: false
		  });
	  });
  });
</script>

<div>
	<table style="width: 100%">
		<tr>
			<td style="width: 80%;">
				<span id="errorMessage" class="errorMsg">Could not retrieve data from server. PLease contact us and try again later.</span>
			</td>
			<td style="width: 20%;">
				<div class="downloadAllTraits">
					<a href="$allURL" class="downloadAllTraitsLink">Download All</a>
				</div>
			</td>
		</tr>
	</table>
</div>

<div id="noTraitsSelected"><span>Please select some traits for download first.</span></div>

<table id="simpleTraitsTableId" class="display">
	<thead>
		<tr>
			<th></th>
			<th>Sample Label</th>
			<th>Sample Name</th>
			<th>Environment</th>
			<th>Size</th>
			<th>Number of sequences</th>
			<th>Actions</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>

<form id="sf" action="$ctx.siteUrl/ws/v1/mg-traits/v1.0.0/all" target="csvDownloadTarget" method="POST" style="display: none;">
	<input type="hidden" class="traitIdsHolder" name="traitIds" />
</form>

<iframe name="csvDownloadTarget" style="display: none;"></iframe>